import{d as h,c as i,a as e,t as c,o as l,F as _,z as b,x as m,p as d,R as p,y as x,l as f,q as y,f as v,m as u,e as k,b as D}from"./index-BqNsMgAy.js";import{u as w,_ as $,a as I,b as L}from"./ErrorMessage.vue_vue_type_script_setup_true_lang-Bzh_Qjwu.js";const U={class:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800"},C={class:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between"},N={class:"text-2xl font-bold text-slate-800 dark:text-white"},T={class:"text-slate-500 dark:text-slate-400"},j={class:"flex items-center gap-4"},z={class:"rounded-xl bg-violet-50 px-5 py-3 text-center dark:bg-violet-900/30"},B={class:"text-2xl font-bold text-violet-600 dark:text-violet-400"},R=["href"],S=h({__name:"DayHeader",props:{dayDetail:{}},setup(r){function n(s){return new Date(s).toLocaleDateString("zh-TW",{year:"numeric",month:"long",day:"numeric"})}return(s,t)=>(l(),i("div",U,[e("div",C,[e("div",null,[e("h1",N,c(r.dayDetail.dayLabel),1),e("p",T,c(n(r.dayDetail.date)),1)]),e("div",j,[e("div",z,[e("p",B,c(r.dayDetail.checkinCount),1),t[0]||(t[0]=e("p",{class:"text-sm text-slate-500 dark:text-slate-400"},"人已打卡",-1))]),e("a",{href:r.dayDetail.threadInfo.threadUrl,target:"_blank",rel:"noopener noreferrer",class:"flex items-center gap-2 rounded-xl bg-violet-600 px-5 py-3 text-white shadow-sm transition-colors hover:bg-violet-700"},[...t[1]||(t[1]=[e("i",{class:"bi bi-discord text-lg"},null,-1),e("span",{class:"font-medium"},"前往討論串",-1)])],8,R)])])]))}}),V={class:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800"},F={key:0,class:"py-12 text-center"},W={key:1,class:"grid grid-cols-1 gap-3 sm:grid-cols-2 lg:grid-cols-3"},q=["src","alt"],A={class:"min-w-0 flex-1"},E={class:"truncate font-medium text-slate-800 dark:text-white"},G={class:"text-xs text-slate-500 dark:text-slate-400"},H=h({__name:"CheckinUserGrid",props:{users:{},scheduleId:{}},setup(r){function n(t){return`https://cdn.discordapp.com/embed/avatars/${parseInt(t)%5}.png`}function s(t){return new Date(t).toLocaleTimeString("zh-TW",{hour:"2-digit",minute:"2-digit"})}return(t,o)=>(l(),i("div",V,[o[1]||(o[1]=e("h3",{class:"mb-4 text-lg font-semibold text-slate-800 dark:text-white"},"打卡名單",-1)),r.users.length===0?(l(),i("div",F,[...o[0]||(o[0]=[e("div",{class:"mb-4 flex justify-center"},[e("div",{class:"flex h-16 w-16 items-center justify-center rounded-2xl bg-slate-100 dark:bg-slate-700"},[e("i",{class:"bi bi-people text-3xl text-slate-400"})])],-1),e("p",{class:"text-slate-500 dark:text-slate-400"},"尚無打卡記錄",-1)])])):(l(),i("div",W,[(l(!0),i(_,null,b(r.users,a=>(l(),m(d(p),{key:a.discordUserId,to:{name:"user-detail",params:{scheduleId:r.scheduleId,discordUserId:a.discordUserId}},class:"group flex items-center gap-3 rounded-xl bg-slate-50 p-3 transition-all hover:bg-slate-100 dark:bg-slate-700/50 dark:hover:bg-slate-700"},{default:x(()=>[e("img",{src:a.avatarUrl||n(a.discordUserId),alt:a.displayName,class:"h-10 w-10 rounded-full object-cover ring-2 ring-slate-100 transition-all group-hover:ring-violet-200 dark:ring-slate-700 dark:group-hover:ring-violet-500",loading:"lazy"},null,8,q),e("div",A,[e("p",E,c(a.displayName),1),e("p",G,c(s(a.checkinTime)),1)])]),_:2},1032,["to"]))),128))]))]))}}),M={class:"p-8"},J={key:0,class:"flex h-96 items-center justify-center"},K={class:"mb-8"},X=h({__name:"DayDetail",setup(r){const n=y(),s=w(),t=f(()=>n.params.scheduleId),o=f(()=>n.params.dayLabel);async function a(){await s.fetchDayDetail(t.value,o.value)}return v(()=>{a()}),(O,g)=>(l(),m($,null,{default:x(()=>[e("div",M,[u(d(p),{to:{name:"dashboard",params:{scheduleId:t.value}},class:"mb-6 inline-flex items-center gap-2 text-sm text-slate-500 transition-colors hover:text-violet-600"},{default:x(()=>[...g[0]||(g[0]=[e("i",{class:"bi bi-arrow-left"},null,-1),D(" 返回 Dashboard ",-1)])]),_:1},8,["to"]),d(s).isLoading&&!d(s).currentDayDetail?(l(),i("div",J,[u(I,{size:"lg"})])):d(s).error?(l(),m(L,{key:1,message:d(s).error,onRetry:a},null,8,["message"])):d(s).currentDayDetail?(l(),i(_,{key:2},[e("div",K,[u(S,{"day-detail":d(s).currentDayDetail},null,8,["day-detail"])]),u(H,{users:d(s).currentDayDetail.checkinUsers,"schedule-id":t.value},null,8,["users","schedule-id"])],64)):k("",!0)])]),_:1}))}});export{X as default};
