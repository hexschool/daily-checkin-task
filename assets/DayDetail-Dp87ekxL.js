import{d as x,a as i,b as e,t as c,o as r,F as p,f as _,A as m,w as h,y as o,R as b,c as f,z as y,k as v,g as u,e as k,h as D}from"./index-DmIcfvM4.js";import{u as w,M as $,a as I,b as L}from"./ErrorMessage.vue_vue_type_script_setup_true_lang-DgRYiN8i.js";const U={class:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800"},C={class:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between"},N={class:"text-2xl font-bold text-slate-800 dark:text-white"},T={class:"text-slate-500 dark:text-slate-400"},j={class:"flex items-center gap-4"},z={class:"rounded-xl bg-violet-50 px-5 py-3 text-center dark:bg-violet-900/30"},B={class:"text-2xl font-bold text-violet-600 dark:text-violet-400"},R=["href"],S=x({__name:"DayHeader",props:{dayDetail:{}},setup(l){function n(s){return new Date(s).toLocaleDateString("zh-TW",{year:"numeric",month:"long",day:"numeric"})}return(s,t)=>(r(),i("div",U,[e("div",C,[e("div",null,[e("h1",N,c(l.dayDetail.dayLabel),1),e("p",T,c(n(l.dayDetail.date)),1)]),e("div",j,[e("div",z,[e("p",B,c(l.dayDetail.checkinCount),1),t[0]||(t[0]=e("p",{class:"text-sm text-slate-500 dark:text-slate-400"},"人已打卡",-1))]),e("a",{href:l.dayDetail.threadInfo.threadUrl,target:"_blank",rel:"noopener noreferrer",class:"flex items-center gap-2 rounded-xl bg-violet-600 px-5 py-3 text-white shadow-sm transition-colors hover:bg-violet-700"},[...t[1]||(t[1]=[e("i",{class:"bi bi-discord text-lg"},null,-1),e("span",{class:"font-medium"},"前往討論串",-1)])],8,R)])])]))}}),V={class:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800"},M={key:0,class:"py-12 text-center"},A={key:1,class:"grid grid-cols-1 gap-3 sm:grid-cols-2 lg:grid-cols-3"},F=["src","alt"],W={class:"min-w-0 flex-1"},E={class:"truncate font-medium text-slate-800 dark:text-white"},G={class:"text-xs text-slate-500 dark:text-slate-400"},H=x({__name:"CheckinUserGrid",props:{users:{},scheduleId:{}},setup(l){function n(t){return`https://cdn.discordapp.com/embed/avatars/${parseInt(t)%5}.png`}function s(t){return new Date(t).toLocaleTimeString("zh-TW",{hour:"2-digit",minute:"2-digit"})}return(t,d)=>(r(),i("div",V,[d[1]||(d[1]=e("h3",{class:"mb-4 text-lg font-semibold text-slate-800 dark:text-white"},"打卡名單",-1)),l.users.length===0?(r(),i("div",M,[...d[0]||(d[0]=[e("div",{class:"mb-4 flex justify-center"},[e("div",{class:"flex h-16 w-16 items-center justify-center rounded-2xl bg-slate-100 dark:bg-slate-700"},[e("i",{class:"bi bi-people text-3xl text-slate-400"})])],-1),e("p",{class:"text-slate-500 dark:text-slate-400"},"尚無打卡記錄",-1)])])):(r(),i("div",A,[(r(!0),i(p,null,_(l.users,a=>(r(),m(o(b),{key:a.discordUserId,to:{name:"user-detail",params:{scheduleId:l.scheduleId,discordUserId:a.discordUserId}},class:"group flex items-center gap-3 rounded-xl bg-slate-50 p-3 transition-all hover:bg-slate-100 dark:bg-slate-700/50 dark:hover:bg-slate-700"},{default:h(()=>[e("img",{src:a.avatarUrl||n(a.discordUserId),alt:a.displayName,class:"h-10 w-10 rounded-full object-cover ring-2 ring-slate-100 transition-all group-hover:ring-violet-200 dark:ring-slate-700 dark:group-hover:ring-violet-500",loading:"lazy"},null,8,F),e("div",W,[e("p",E,c(a.displayName),1),e("p",G,c(s(a.checkinTime)),1)])]),_:2},1032,["to"]))),128))]))]))}}),q={class:"p-8"},J={key:0,class:"flex h-96 items-center justify-center"},K={class:"mb-8"},X=x({__name:"DayDetail",setup(l){const n=y(),s=w(),t=f(()=>n.params.scheduleId),d=f(()=>n.params.dayLabel);async function a(){await s.fetchDayDetail(t.value,d.value)}return v(()=>{a()}),(O,g)=>(r(),m($,null,{default:h(()=>[e("div",q,[u(o(b),{to:{name:"dashboard",params:{scheduleId:t.value}},class:"mb-6 inline-flex items-center gap-2 text-sm text-slate-500 transition-colors hover:text-violet-600"},{default:h(()=>[...g[0]||(g[0]=[e("i",{class:"bi bi-arrow-left"},null,-1),D(" 返回 Dashboard ",-1)])]),_:1},8,["to"]),o(s).isLoading&&!o(s).currentDayDetail?(r(),i("div",J,[u(I,{size:"lg"})])):o(s).error?(r(),m(L,{key:1,message:o(s).error,onRetry:a},null,8,["message"])):o(s).currentDayDetail?(r(),i(p,{key:2},[e("div",K,[u(S,{"day-detail":o(s).currentDayDetail},null,8,["day-detail"])]),u(H,{users:o(s).currentDayDetail.checkinUsers,"schedule-id":t.value},null,8,["users","schedule-id"])],64)):k("",!0)])]),_:1}))}});export{X as default};
